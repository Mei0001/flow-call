## **アウトバウンドコールセンター向け リアルタイム台本生成システム MVP要件定義書**

### 1. **システム概要**

#### 1.1 目的
アウトバウンド営業の会話データを解析し、リアルタイムで最適な営業トークを生成・表示することで、営業担当者の成約率向上を支援する

#### 1.2 スコープ
- **対象**: MVP（Minimum Viable Product）
- **開発期間**: 数時間
- **技術スタック**: Next.js、TypeScript、Tailwind CSS

### 2. **機能要件**

#### 2.1 コア機能

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-001 | 音声ファイルアップロード | デモ用音声データ（.wav, .mp3等）のアップロード | 必須 |
| F-002 | 音声文字起こし | アップロードされた音声を文字データに変換 | 必須 |
| F-003 | 会話履歴表示 | トークブロック単位（相手/自分）でチャット形式表示 | 必須 |
| F-004 | リアルタイム台本生成 | 相手の発話に対して最適な返答を2秒以内に生成 | 必須 |
| F-005 | トークフロー可視化 | 会話の流れをフローチャート形式で表示 | 必須 |
| F-006 | 成果データ分析 | アポ取得/非取得のトークログを分析 | 必須 |
| F-007 | 学習データ蓄積 | 成功パターンの自動抽出と蓄積（日次バッチ想定） | 必須 |

#### 2.2 画面構成

```
+------------------+------------------------+------------------+
|                  |                        |                  |
|   チャット画面    |   トークフロー表示      |   サイドパネル    |
|  （LINE風UI）    |  （フローチャート）     | （次の台本候補）  |
|                  |                        |                  |
|  [相手] こんにちは |    [開始]              | 推奨トーク:      |
|  [自分] お忙しい  |      ↓                | 「恐れ入ります、  |
|   ところ...      |   [挨拶]              |  ○○会社の××と   |
|  [相手] 何の用？  |      ↓                |  申します...」    |
|                  |   [用件確認] ←今ここ    |                  |
|                  |    ／  ＼              | 代替案1:         |
|                  |  [興味] [拒否]         | 「お時間1分だけ   |
|                  |                        |  いただけ...」    |
+------------------+------------------------+------------------+
```

### 3. **データ構造**

#### 3.1 会話データモデル

```typescript
interface Conversation {
  id: string;
  timestamp: Date;
  blocks: TalkBlock[];
  outcome: 'appointment' | 'rejected' | 'pending';
  metadata: {
    duration: number;
    customer_id?: string;
    agent_id?: string;
  };
}

interface TalkBlock {
  id: string;
  speaker: 'agent' | 'customer';
  text: string;
  timestamp: Date;
  suggested_response?: string;
  response_time?: number;
  emotion?: 'positive' | 'neutral' | 'negative';
}
```

#### 3.2 学習データモデル

```typescript
interface LearningData {
  pattern_id: string;
  trigger_phrase: string;  // 相手の発話
  successful_responses: {
    text: string;
    success_rate: number;
    usage_count: number;
  }[];
  context_tags: string[];  // ['価格交渉', '初回接触', '反論対応']
}
```

### 4. **技術仕様**

#### 4.1 アーキテクチャ

```
[Frontend (Next.js)]
    ↓
[API Routes]
    ↓
[音声処理] → [OpenAI Whisper API / Web Speech API]
    ↓
[台本生成] → [OpenAI GPT-4 / Claude API]
    ↓
[データ保存] → [ローカルストレージ（MVP）/ PostgreSQL（本番）]
```

#### 4.2 主要ライブラリ

```json
{
  "dependencies": {
    "next": "14.x",
    "react": "18.x",
    "typescript": "5.x",
    "tailwindcss": "3.x",
    "openai": "4.x",
    "react-flow": "11.x",  // フローチャート表示用
    "crypto-js": "4.x"     // データ暗号化用
  }
}
```

### 5. **MVP実装の簡略化ポイント**

| 項目 | 本番想定 | MVP実装 |
|------|----------|---------|
| 音声入力 | CTI連携・リアルタイム | ファイルアップロード |
| データ保存 | PostgreSQL/暗号化 | ローカルストレージ |
| 学習処理 | 日次バッチ・ML Pipeline | 手動トリガー・簡易スコアリング |
| 認証 | 多要素認証 | なし |
| UI | レスポンシブ・多言語 | デスクトップのみ |

### 6. **デモシナリオ**

```
1. 営業担当者が過去の通話録音をアップロード
2. システムが音声を文字起こし、会話をブロック分割
3. 各ブロックごとに「次の最適トーク」を生成・表示
4. 成功/失敗フラグを付与してデータ蓄積
5. 蓄積データから成功パターンを抽出（手動実行）
6. 次回の台本生成時に成功パターンを優先利用
```

### 7. **成功指標（KPI）**

- **技術的指標**
  - 音声認識精度: 90%以上
  - 台本生成速度: 2秒以内
  - UI応答性: 100ms以内

- **ビジネス指標**（将来測定）
  - アポ取得率の向上率
  - 平均通話時間の短縮
  - 新人立ち上がり期間

### 8. **今後の拡張計画**

- **Phase 2**: CTI連携、リアルタイム音声処理
- **Phase 3**: CRM連携（Salesforce等）
- **Phase 4**: 複数LLMの使い分け、Fine-tuning
- **Phase 5**: コンプライアンスチェック機能